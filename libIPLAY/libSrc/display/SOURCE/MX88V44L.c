


#include "global612.h"

#if (PANEL_TCON == TCON_MX88V44L)	//Mason 2006/4/17
void MX88V44WtRegFromTable(BYTE DevID, BYTE * SettingTable, BYTE TVRegFlag)	//TvRegFlag =0:Normal =1:TV
{
	BYTE TablePointer = 0, RegNumber = 0, RegValue = 0;

	RegNumber = *(SettingTable + TablePointer);
	RegValue = *(SettingTable + TablePointer + 1);
	while (!((RegNumber == 0xff) && (RegValue == 0xff)))
	{
		if (TVRegFlag)
			I2CM_MX88V44_WtTVReg(DevID, RegNumber, RegValue);
		else
			I2CM_WtReg1(DevID, RegNumber, RegValue);
		TablePointer += 2;
		RegNumber = *(SettingTable + TablePointer);
		RegValue = *(SettingTable + TablePointer + 1);
	}
}
#if 0 // rick 6/8
BYTE MX88V44_Table_TVInit[]=
{
    0x3f,0x00,  0x03,0x00,  0x05,0x64,  0x06,0x8a,  0x07,0x20,  0x11,0xb9,  0x83,0x89,  0xff,0xff   
};
BYTE MX88V44_Table_AU7[]=
{
    0x00,0xc0,  0x01,0x3f,  0x03,0x0d,  0x04,0x0c,  0x06,0xd8,  0x30,0x48,  0x31,0x12,  0x32,0x00,  0x33,0x38,
    0x34,0x00,  0x35,0x30,  0x36,0x01,  0x3b,0x0d,  0x3d,0x01,  0x3f,0x0c,  0x41,0x02,  0x43,0x0a,  0x45,0xca,  0x46,0x00,
    0x47,0xd0,  0x48,0x00,  0x49,0x12,  0x4a,0x00,  0x4b,0x01,  0x4c,0x00,  0x4d,0x12,  0x4e,0x00,  0x53,0x15,  0x55,0x14,
    0x57,0x15,  0x59,0x14,  0x68,0x10,  0x71,0x09,  0x74,0x6e,  0x75,0x00,  0x76,0x8a,  0x77,0x00,  0x78,0x01,  0x79,0x00,
    0x7a,0xa3,  0x7b,0x00,  0x7c,0x00,  0x7d,0x84,  0x7f,0x80,  0xff,0xff
};
BYTE MX88V44_Table_AU7_Contrast[]=
{
    0x8a,0x56,  0x0a,0x00,  0x0b,0x10,  0x11,0xc0,  0x12,0x70,  0x13,0x70,  0x14,0x70,  0x15,0x78,  0x16,0x78,  0x17,0x78,  
    0xff,0xff
};
BYTE MX88V44_Table_AU56_Contrast[]=
{
    0x8a,0x39,  0x0a,0x00,  0x0b,0x10,  0x11,0xc0,  0x12,0x80,  0x13,0x80,  0x14,0x80,  0x15,0x70,  0x16,0x78,  0x17,0x78,  
    0xff,0xff
};

BYTE CVD1_NTSCTab[] =
{
	0x00, 0x00,		0x01, 0x09,		0x02, 0x6F,		0x04, 0xDD,		0x0C, 0x8A,		0x18, 0x21,		
	0x19, 0xF0,		0x1A, 0x7C,		0x1B, 0x1F,		0x2E, 0x82,		0x30, 0x22,		
	0x31, 0x61,		0x39, 0x0A,		0x82, 0x42,		0x87, 0x10,		0xFF,0xFF
};

BYTE MX88V44_Table_TVNTSC[]=
{
    0x00,0x00,  0x01,0x01,  0x02,0x6f,  0x0c,0x8a,  0x18,0x21,  0x19,0xf0,  0x1a,0x7c,  0x1b,0x1f,  0x2e,0x82,  0x30,0x22,
    0x31,0x61,  0x39,0x0a,  0x82,0x42,  0x87,0x10,  0xff,0xff
};
#else
BYTE MX88V44_Table_TVInit[] = {
	0x3f, 0x00, 0x03, 0x00, 0x05, 0x64, 0x06, 0x8a, 0x07, 0x20, 0x11, 0xb9, 0x83, 0x89, 0xff, 0xff
};
BYTE MX88V44_Table_AU7[] = {
	0x00, 0xc0, 0x01, 0x3f, 0x03, 0x0d, 0x04, 0x0c, 0x06, 0xd8, 0x30, 0x48, 0x31, 0x12, 0x32, 0x00,
	0x33, 0x38,
	0x34, 0x00, 0x35, 0x30, 0x36, 0x01, 0x3b, 0x0d, 0x3d, 0x01, 0x3f, 0x0c, 0x41, 0x02, 0x43, 0x0a,
	0x45, 0xca, 0x46, 0x00,
	0x47, 0xd0, 0x48, 0x00, 0x49, 0x12, 0x4a, 0x00, 0x4b, 0x01, 0x4c, 0x00, 0x4d, 0x12, 0x4e, 0x00,
	0x53, 0x15, 0x55, 0x14,
	0x57, 0x15, 0x59, 0x14, 0x68, 0x10, 0x71, 0x09, 0x74, 0x6e, 0x75, 0x00, 0x76, 0x8a, 0x77, 0x00,
	0x78, 0x01, 0x79, 0x00,
	0x7a, 0xa3, 0x7b, 0x00, 0x7c, 0x00, 0x7d, 0x84, 0x7f, 0x80, 0xff, 0xff
};
BYTE MX88V44_Table_AU7_Contrast[] = {
	0x8a, 0x56, 0x0a, 0x00, 0x0b, 0x10, 0x11, 0xc0, 0x12, 0x70, 0x13, 0x70, 0x14, 0x70, 0x15, 0x78,
	0x16, 0x78, 0x17, 0x78,
	0xff, 0xff
};
BYTE MX88V44_Table_AU56_Contrast[] = {
	0x8a, 0x39, 0x0a, 0xb0, 0x0b, 0x1e, 0x11, 0xc0, 0x12, 0x80, 0x13, 0x80, 0x14, 0x80, 0x15, 0x70,
	0x16, 0x78, 0x17, 0x78,
	0xff, 0xff
};
BYTE MX88V44_Table_TVNTSC[] = {
	0x00, 0x00, 0x01, 0x01, 0x02, 0x6f, 0x0c, 0x8a, 0x18, 0x21, 0x19, 0xf0, 0x1a, 0x7c, 0x1b, 0x1f,
	0x2e, 0x82, 0x30, 0x22,
	0x31, 0x61, 0x39, 0x0a, 0x82, 0x42, 0x87, 0x10, 0xff, 0xff
};
#endif
#if 0 // rick 6/8
BYTE MX88V44Init(void)
{       
        register GPIO *sGpio;
        sGpio = (GPIO *)(GPIO_BASE);
		
#ifdef CYBOARD 
	//Jasmine 4/7 CH56 88V44 5V pull high
	sGpio->Gpcfg1&=0xfff7fff7;// gpio 19 define default
	sGpio->Gpdat1|=0x00080008;//gpio 19 output high
	
	//Jasmine 4/7 CH56 88V44 sys reset pull high
	sGpio->Gpcfg0&=0xff7fff7f;// gpio 7 define default
	sGpio->Gpdat0|=0x00800080;//gpio 7 output high	
#elif LUCKY
	//Jasmine 4/7 CH56 88V44 5V pull high
	sGpio->Gpcfg1&=0xfff7fff7;// gpio 19 define default
	sGpio->Gpdat1|=0x00080008;//gpio 19 output high
	
	//Jasmine 4/7 CH56 88V44 sys reset pull high
	sGpio->Gpcfg0&=0xfff7fff7;// gpio 3 define default
	sGpio->Gpdat0|=0x00080008;//gpio 3 output high	
	
#else	
        sGpio->Gpcfg0 &= 0xffefffef;
        sGpio->Gpdat0 |= 0x00100000;
        sGpio->Gpdat0 &= 0xffffffef;
        IODelay (100);
        sGpio->Gpdat0 |= 0x00000010;
        IODelay (100);
#endif
        
        MX88V44WtRegFromTable(0x28,&MX88V44_Table_TVInit,1); //TV decoder
        MX88V44WtRegFromTable(0x28,&MX88V44_Table_AU7,0); //Normal
        #if (defined( WINBOARD7)||defined(LUCKY))
#if 0
	// rick add 5/22
	I2CM_MX88V44_WtTVReg(0x28,0x07,0x00);//rick 0x20->0x00
	I2CM_WtReg1(0x28,0x20,0x40);
	I2CM_WtReg1(0x28,0x21,0x00);
	I2CM_WtReg1(0x28,0x22,0x00);	
	I2CM_WtReg1(0x28,0x23,0xFF);	
	I2CM_WtReg1(0x28,0x11,0x00);	
        MX88V44WtRegFromTable(0x28,&CVD1_NTSCTab,1);
	I2CM_WtReg1(0x28,0x20,0x40);
	// rick add 5/22
#endif
		
            MX88V44WtRegFromTable(0x28,&MX88V44_Table_AU7_Contrast,0);
        #elif (defined(WINBOARD56)) 
            MX88V44WtRegFromTable(0x28,&MX88V44_Table_AU56_Contrast,0);
	 #elif (defined(CYBOARD)) //Jasmine 4/18 CH
	 	MX88V44WtRegFromTable(0x28,&MX88V44_Table_AU56_Contrast,0);	
		I2CM_WtReg1(0x28,0x45,0xbf); //88v44 h backporch
		I2CM_WtReg1(0x28,0x47,0xd5); //88v44 h frontporch

		I2CM_WtReg1(0x28,0x53,0x11); //Jasmine 4/26 CH: 88v44 v start 
		I2CM_WtReg1(0x28,0x55,0x10); //Jasmine 4/26 CH: 88v44 v end
		I2CM_WtReg1(0x28,0x57,0x11); //Jasmine 4/26 CH: 88v44 v start
		I2CM_WtReg1(0x28,0x59,0x10); //Jasmine 4/26 CH: 88v44 v end
		
        #endif
        MX88V44WtRegFromTable(0x28,&MX88V44_Table_TVNTSC,1);
}

#else
void MX88V44Init(void)
{
	register GPIO *sGpio;

	sGpio = (GPIO *) (GPIO_BASE);
/*	
//	sGpio->Gpcfg1&=0xfff7fff7;// gpio 19 define default   
//	sGpio->Gpdat1|=0x00080008;//gpio 19 output high,control 5V for 88v44 power   
	
	sGpio->Gpcfg1&=0xfffdfffd;// gpio 17 define default
	sGpio->Gpdat1|=0x00020000;// gpio 17 output
	sGpio->Gpdat1&=0xfffffffd;//gpio 17 output low , select CD4052B channel 0 , for earphone select	

       sGpio->Gpcfg0&=0xfff9fff9;	// U/D R/L setting
	sGpio->Gpdat0|=0x00060000;
	sGpio->Gpdat0|=0x00000004;	//L/R GP1 -> High
	sGpio->Gpdat0&=0xfffffffb;	//U/D GP2 -> Low	

	sGpio->Gpcfg0&=0xffefffef;// gpio 4 define default
	sGpio->Gpdat0|=0x00100000;// gpio 4 output
	sGpio->Gpdat0&=0xffffffef;//gpio 4 output low , to disable mute function		

	sGpio->Gpcfg1&=0xff7fff7f;// gpio 23 define default
	sGpio->Gpdat1|=0x00800080;//gpio 23  output high	
*/
	
	//88V44 5V pull high , rick 6/8
//	sGpio->Gpcfg1&=0xfff7fff7;// gpio 19 define default
//	sGpio->Gpdat1|=0x00080008;//gpio 19 output high
	TurnOnMX88V44Power();
		IODelay(100);
	// 88V44 sys reset pull high , rick 6/8
//	sGpio->Gpcfg0&=0xfff7fff7;// gpio 3 define default
//	sGpio->Gpdat0|=0x00080008;//gpio 3 output high	
	PullHighMX88V44Reset();
//	sGpio->Gpcfg0 &= 0xffefffef;
//	sGpio->Gpdat0 |= 0x00100000;
//	sGpio->Gpdat0 &= 0xffffffef;
//	IODelay(100);
//	sGpio->Gpdat0 |= 0x00000010;
	IODelay(100);
//       MX88V44WtRegFromTable(0x28,&MX88V44_Table_TVInit,1); //TV decoder
//        MX88V44WtRegFromTable(0x28,&MX88V44_Table_AU7,0); //Normal
        
	MX88V44WtRegFromTable(0x28, (BYTE *) (&MX88V44_Table_TVInit), 1);
	MX88V44WtRegFromTable(0x28, (BYTE *) (&MX88V44_Table_AU7), 0);
	MX88V44WtRegFromTable(0x28, (BYTE *) (&MX88V44_Table_AU7_Contrast), 0);
	MX88V44WtRegFromTable(0x28, (BYTE *) (&MX88V44_Table_TVNTSC), 1);
	TurnOnMX88V44Power();	
//	Panel_LR_High_Setting();
//	Panel_UD_High_Setting();
}
#endif
#endif


